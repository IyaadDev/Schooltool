<!DOCTYPE html>
<html data-bs-theme="light" lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Configuration</title>
    <link rel="canonical" href="https://schooltool.io/standard/app/config-section.html">
    <meta property="og:url" content="https://schooltool.io/standard/app/config-section.html">
    <meta name="twitter:description" content="Student productivity tool">
    <meta name="twitter:card" content="summary">
    <meta property="og:type" content="website">
    <meta name="description" content="Introducing School Tool, a productivity tool for students to effectively study, ask questions, check timetables and much more">
    <meta property="og:image" content="https://schooltool.io/assets/img/logo.webp">
    <meta name="twitter:image" content="https://schooltool.io/assets/img/logo.webp">
    <meta name="twitter:title" content="School Tool">
    <link rel="icon" type="image/webp" sizes="3995x3995" href="../../assets/img/logo.webp?h=0722d3247654ad6b5121ce1ebd28d5fc">
    <link rel="icon" type="image/webp" sizes="3995x3995" href="../../assets/img/logo.webp?h=0722d3247654ad6b5121ce1ebd28d5fc">
    <link rel="icon" type="image/webp" sizes="3995x3995" href="../../assets/img/logo.webp?h=0722d3247654ad6b5121ce1ebd28d5fc">
    <link rel="icon" type="image/webp" sizes="3995x3995" href="../../assets/img/logo.webp?h=0722d3247654ad6b5121ce1ebd28d5fc">
    <link rel="icon" type="image/webp" sizes="3995x3995" href="../../assets/img/logo.webp?h=0722d3247654ad6b5121ce1ebd28d5fc">
    <link rel="stylesheet" href="../../assets/bootstrap/css/bootstrap.min.css?h=896192cc65e20f1fcc6d792b5b9a4626">
    <link rel="manifest" href="../../manifest.json?h=620b3241d471ebccbd406b0b9bc10adf">
    <link rel="stylesheet" href="../../assets/css/aib.compiled.css?h=81d70c0f8d48d35d04683ec529545b32">
    <link rel="stylesheet" href="../../assets/css/gTexts.css?h=49dd4fc6c5813697f572a89c62202cbe">
    <link rel="stylesheet" href="../../assets/css/Navbar-Centered-Brand-icons.css?h=befd8a398792e305b7ffd4a176b5b585">
    <link rel="stylesheet" href="../../assets/css/styles.css?h=db1924634b2a05e58a6b1142143d0ad5">
</head>

<body style="background-image: url(&quot;../../assets/img/back/waveline.webp?h=57da7f30d4d9bc322599a0456f809701&quot;);background-size: cover;background-repeat: no-repeat;background-attachment: fixed;width: 100%;margin: 0;padding: 0;height: 100vw;">
    <!-- Start: Navbar Centered Brand -->
    <nav class="navbar navbar-expand sticky-top bg-body d-md-flex justify-content-md-center align-items-md-center py-3" style="padding-top: 0.25rem!Important;padding-bottom: 0.25rem!Important;background: var(--bs-border-color-translucent)!important;margin-bottom: 2rem!important;">
        <div class="container-fluid"><a class="navbar-brand d-flex align-items-center" href="#" style="font-weight: bold;font-size: 3rem;">
                <div class="d-md-flex justify-content-md-center align-items-md-center" style="padding: 0.25rem!Important;padding-top: 0px!important;padding-bottom: 0px!important;border-radius: 0.5rem!important;font-size: 1rem;"><img src="../../assets/img/logo.webp?h=0722d3247654ad6b5121ce1ebd28d5fc" style="width: 2rem;height: auto;"><span class="sct" style="font-size: 1.25rem;margin-left: 0.25rem;">School Tool</span></div>
            </a></div>
    </nav><!-- End: Navbar Centered Brand -->
    <header>
        <!-- Start: Header -->
        <section>
            <!-- Start: Userpanel -->
            <section style="height: 100%;">
                <div class="card text-center d-md-flex justify-content-md-center align-items-md-center" style="background: rgba(255,255,255,0.6);margin: 1rem!Important;height: 100%;">
                    <div class="card-body text-center d-md-flex justify-content-md-center align-items-md-center" style="border-radius: 5rem;background: #ffffff00;">
                        <div style="padding: 4vw;"><img src="../../assets/img/logo.webp?h=0722d3247654ad6b5121ce1ebd28d5fc" style="width: 8rem;height: auto;">
                            <h1>Select your&nbsp;<span class="sct">section</span></h1>
                            <p>Example Grade 10-1's section would be 1</p><form class="text-center">
    <select id="sectionSelect" class="form-select d-lg-flex justify-content-lg-center align-items-lg-center" style="font-size: x-large; margin-bottom: 1rem;">
        <optgroup label="Select your section">
            <option value="1" selected>1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
        </optgroup>
    </select>
    <button id="openButton" class="btn btn-primary" type="button">Open</button>
</form>

<script>
    // Function to set a cookie
    function setCookie(name, value) {
        document.cookie = `${name}=${value}; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/`;
    }

    // Function to get a parameter from the URL
    function getParameterByName(name, url) {
        if (!url) url = window.location.href;
        name = name.replace(/[\[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
    }

    // Function to load the classes JSON data
    function loadClassesData(callback) {
        // Replace 'path-to-your-json-file' with the actual path to your JSON file
        fetch('https://schooltool.io/assets/js/classes.json')
            .then(response => response.json())
            .then(data => callback(data))
            .catch(error => console.error('Error loading classes data:', error));
    }

    // Function to check if a grade and section combination is true or false
    function checkClassStatus(grade, section, classesData) {
        if (classesData && classesData.classes && classesData.classes[grade] && classesData.classes[grade][section] !== undefined) {
            return classesData.classes[grade][section];
        }
        return null; // Combination not found
    }

    // Function to set cookies and redirect
    function setCookiesAndRedirect(grade, section, classStatus) {
        // Set the "classAccess" cookie based on the class status
        setCookie("classAccess", classStatus ? "true" : "false");

        // Set the "class" cookie in the '9-1' format
        setCookie("class", `${grade}-${section}`);

        // Redirect to auth.html
        window.location.href = "auth.html";
    }

    // Event listener for the "Open" button
    document.getElementById("openButton").addEventListener("click", function () {
        // Get the selected value from the dropdown
        var selectedGrade = document.getElementById("sectionSelect").value;

        // Get the 'gr' parameter from the URL
        var grParameter = getParameterByName("gr");

        // Load the classes data and check the status
        loadClassesData(function (classesData) {
            var classStatus = checkClassStatus(grParameter, selectedGrade, classesData);
            if (classStatus !== null) {
                console.log(`Grade ${grParameter}, Section ${selectedGrade}: ${classStatus ? 'True' : 'False'}`);
                
                // Set cookies and redirect to auth.html
                setCookiesAndRedirect(grParameter, selectedGrade, classStatus);
            } else {
                console.log(`Grade ${grParameter}, Section ${selectedGrade} not found in classes data.`);
            }
        });
    });
</script>

                        </div>
                    </div>
                </div>
            </section><!-- End: Userpanel -->
        </section><!-- End: Header -->
    </header>
    <script src="../../assets/bootstrap/js/bootstrap.min.js?h=a52d057774a957ffc5c4e3aabf79520a"></script>
    <script src="../../assets/js/user.js?h=d41d8cd98f00b204e9800998ecf8427e"></script>
</body>

</html>